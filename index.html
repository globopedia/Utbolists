<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Futbolistas — Huracán</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=MuseoModerno:wght@500&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'MuseoModerno', arial-black; background:#fff; color:#222; margin:20px; }
    h1 { color:#FF0000; text-align:center; }
    .logo { display:block; margin:0 auto 10px; width:100px; }
    select { padding:8px; border-radius:8px; border:2px solid #FF0000; font-size:16px; margin-bottom:20px; }
    .club-card { border:3px solid #FF0000; border-radius:20px; padding:20px; max-width:900px; margin:0 auto; background:#fff; box-shadow:0 4px 12px rgba(0,0,0,.1); }
    .club-header { display:flex; align-items:center; gap:15px; border-bottom:2px solid #FF0000; padding-bottom:10px; margin-bottom:10px; }
    h2 { margin:0; color:#FF0000; font-size:22px; }
    .stats { margin-top:20px; }
    .stat-group { margin-bottom:20px; padding:12px; border:1px solid #FF0000; border-radius:12px; background:#fff5f5; }
    .stat-title { font-weight:bold; color:#FF0000; margin-bottom:6px; }
    .hr { border:none; border-top:1px solid #FF0000; margin:8px 0; }
    .partido-card { border:1px solid #ccc; border-radius:6px; padding:6px; margin:4px 0; background:#fafafa; font-size:14px; text-align: center; }
    .acordeon { border: 1px solid #ddd; border-radius: 6px; margin: 6px 0; background: #fefefe; }
    .acordeon-header { background: #eee; padding: 4px 8px; cursor: pointer; font-size: 14px; text-align: right; position: relative; padding-right: 20px; }
    .acordeon-header::after { content: "▾"; position: absolute; right: 0; transition: transform 0.3s; }
    .acordeon-header.abierto::after { transform: rotate(180deg); }
    .acordeon-body { max-height: 1000px; overflow: hidden; transition: max-height 0.3s ease; padding: 8px; }
    .acordeon-body.cerrado { max-height: 0; padding: 0 8px; }
    .resultado1-box, .resultado2-box {
      display: inline-block; width: 16px; height: 28px; font-size: 32px; font-weight: bold;
      line-height: 28px; text-align: center; margin: 2px; padding: 10px 10px;
      border: 3px solid #FF0000; border-radius: 6px; background: #fff5f5;
      vertical-align: middle; min-width: 26px;
    }
    .escudo-huracan, .escudo-rival { width: 50px; height: 50px; object-fit: contain; position: relative; top: 6px; vertical-align: middle; }
    .resultado-con-escudo { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; justify-content:center; }
    .stat-title small { color:#666; font-weight:normal; margin-left:6px; }

  .bandera {
  height: 30px;
  margin: 6px;
  border-radius: 5px;
  box-shadow: 0 0 2px rgba(0,0,0,0.3);
  vertical-align: middle;
}
    
  </style>
</head>
<body>
  <img src="https://globopedia.github.io/Artids/logo_globopedia.png" alt="Logo Huracán" class="logo" />
  <h1>📜 Futbolistas</h1>

  <div style="text-align:center;">
    <label>Seleccioná futbolista: </label>
    <select id="futbolistaSelect"></select>
  </div>

  <div id="futbolistaInfo" class="club-card" style="display:none;"></div>

  <script>
    const futbolistasURL = "https://globopedia.github.io/Utbolists/Utbolists.csv?v=" + Date.now();
    const partidosURL = "https://globopedia.github.io/Artids/Encuentros_Huracan.csv?v=" + Date.now();

    let futbolistas = [];
    let encuentros = [];

    const norm = (t) => (t || "").toString().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim().toLowerCase();
    const cap = (s) => s ? s.charAt(0).toUpperCase() + s.slice(1).toLowerCase() : s;

    const ORDEN_COMPETENCIAS = ["Gira por México 2007","Apertura 2007/08","Clausura 2007/08","Copa Cafam 2008","Apertura 2008/09","Clausura 2008/09","Apertura 2009/10","Clausura 2009/10","Despedida de Marcelinho Carioca 2010","Apertura 2010/11",
"Clausura 2010/11","Desempate Descenso 2011","Campeonato B Nacional 2011/12","Copa Argentina 2012","Copa de Clásicos 2012",
"Campeonato B Nacional 2012/13","Copa Argentina 2013","Campeonato B Nacional 2013/14","Desempate 3° Puesto BN 2013/14","Copa Argentina 2014",
"Desempate 3° Puesto NB 2013/14","Campeonato B Nacional 2014","Desempate 5° Puesto NB 2014",
"Copa Libertadores 2015","Campeonato 2015","Supercopa 2015","Copa Argentina 2015","Copa Sudamericana 2015","Copa Ciudad de Buenos Aires 2016",
"Copa Libertadores 2016","Campeonato 2016","Copa Argentina 2016","Campeonato 2016/17","Copa Sudamericana 2017",
"Copa Argentina 2017","Superliga 2017/18","Copa Schneider 2018","Copa Argentina 2018","Superliga 2018/19","Copa Libertadores 2019",
"Copa Superliga 2019","Copa Argentina 2019","Superliga 2019/20","Copa Sudamericana 2020","Copa Superliga 2020",
"Copa Maradona 2020","Copa-LPF 2021","Copa Argentina 2020","Torneo-LPF 2021","Amistosos 2022","Copa-LPF 2022",
"Copa Argentina 2022","Torneo-LPF 2022","Torneo-LPF 2023","Copa Argentina 2023","Copa Libertadores 2023",
"Copa Sudamericana 2023","Copa-LPF 2023","Copa Agustín Peña 2024","Serie Río de la Plata 2024","Copa-LPF 2024","Copa Argentina 2024","Torneo-LPF 2024",
"Serie Río de la Plata 2025","Apertura-LPF 2025","Copa Argentina 2025","Copa Sudamericana 2025","Clausura-LPF 2025","Otros"];
    const CONDICIONES = ["Local","Neutral","Visitante"];
    const SITUACIONES = ["Victoria","Empate","Derrota"];

    function bucketCompetencia(torneo) {
      const t = norm(torneo || "");
      if (t.includes("mexico 2007")) return "Gira por México 2007";
      if (t.includes("apertura 2007")) return "Apertura 2007/08";
      if (t.includes("clausura 2008")) return "Clausura 2007/08";
      if (t.includes("cafam 2008")) return "Copa Cafam 2008";
      if (t.includes("apertura 2008")) return "Apertura 2008/09";
      if (t.includes("clausura 2009")) return "Clausura 2008/09";
      if (t.includes("apertura 2009")) return "Apertura 2009/10";
      if (t.includes("carioca 2010")) return "Despedida de Marcelinho Carioca 2010";
      if (t.includes("clausura 2010")) return "Clausura 2009/10";
      if (t.includes("apertura 2010")) return "Apertura 2010/11";
      if (t.includes("clausura 2011")) return "Clausura 2010/11";
      if (t.includes("campeonato 10-11")) return "Desempate Descenso 2011";
      if (t.includes("nacional b 11-12")) return "Campeonato B Nacional 2011/12";
      if (t.includes("copa argentina 2012")) return "Copa Argentina 2012";
      if (t.includes("clasicos 2012")) return "Copa de Clásicos 2012";
      if (t.includes("nacional b 12-13")) return "Campeonato B Nacional 2012/13";
      if (t.includes("copa argentina 2013")) return "Copa Argentina 2013";
      if (t.includes("nacional b 13-14")) return "Campeonato B Nacional 2013/14";
      if (t.includes("copa argentina 2014")) return "Copa Argentina 2014";
      if (t.includes("nb 13-14")) return "Desempate 3° Puesto BN 2013/14";
      if (t.includes("nacional b 2014")) return "Campeonato B Nacional 2014";
      if (t.includes("nb 2014")) return "Desempate 5° Puesto NB 2014";
      if (t.includes("libertadores 2015")) return "Copa Libertadores 2015";
      if (t.includes("campeonato 2015")) return "Campeonato 2015";
      if (t.includes("supercopa 2015")) return "Supercopa 2015";
      if (t.includes("copa argentina 2015")) return "Copa Argentina 2015";
      if (t.includes("sudamericana 2015")) return "Copa Sudamericana 2015";
      if (t.includes("buenos aires 2016")) return "Copa Ciudad de Buenos Aires 2016";
      if (t.includes("libertadores 2016")) return "Copa Libertadores 2016";
      if (t.includes("campeonato 2016")) return "Campeonato 2016";
      if (t.includes("copa argentina 2016")) return "Copa Argentina 2016";
      if (t.includes("campeonato 16-17")) return "Campeonato 2016/17";
      if (t.includes("sudamericana 2017")) return "Copa Sudamericana 2017";
      if (t.includes("copa argentina 2017")) return "Copa Argentina 2017";
      if (t.includes("saf 17-18")) return "Superliga 2017/18";
      if (t.includes("schneider 2018")) return "Copa Schneider 2018";
      if (t.includes("copa argentina 2018")) return "Copa Argentina 2018";
      if (t.includes("saf 18-19")) return "Superliga 2018/19";
      if (t.includes("libertadores 2019")) return "Copa Libertadores 2019";
      if (t.includes("superliga 2019")) return "Copa Superliga 2019";
      if (t.includes("copa argentina 2019")) return "Copa Argentina 2019";
      if (t.includes("saf 19-20")) return "Superliga 2019/20";
      if (t.includes("san juan 2020")) return "Copa San Juan 2020";
      if (t.includes("sudamericana 2020")) return "Copa Sudamericana 2020";
      if (t.includes("superliga 2020")) return "Copa Superliga 2020";
      if (t.includes("copa maradona 2020")) return "Copa Maradona 2020";
      if (t.includes("copa-lpf 2021")) return "Copa-LPF 2021";
      if (t.includes("copa argentina 2020")) return "Copa Argentina 2020";
      if (t.includes("torneo-lpf 2021")) return "Torneo-LPF 2021";
      if (t.includes("amistosos 2022")) return "Amistosos 2022";
      if (t.includes("copa-lpf 2022")) return "Copa-LPF 2022";
      if (t.includes("copa argentina 2022")) return "Copa Argentina 2022";
      if (t.includes("torneo-lpf 2022")) return "Torneo-LPF 2022";
      if (t.includes("torneo-lpf 2023")) return "Torneo-LPF 2023";
      if (t.includes("copa argentina 2023")) return "Copa Argentina 2023";
      if (t.includes("libertadores 2023")) return "Copa Libertadores 2023";
      if (t.includes("sudamericana 2023")) return "Copa Sudamericana 2023";
      if (t.includes("copa-lpf 2023")) return "Copa-LPF 2023";
      if (t.includes("peña 2024")) return "Copa Agustín Peña 2024";
      if (t.includes("plata 2024")) return "Serie Río de la Plata 2024";
      if (t.includes("copa-lpf 2024")) return "Copa-LPF 2024";
      if (t.includes("copa argentina 2024")) return "Copa Argentina 2024";
      if (t.includes("torneo-lpf 2024")) return "Torneo-LPF 2024";
      if (t.includes("plata 2025")) return "Serie Río de la Plata 2025";
      if (t.includes("apertura-lpf 2025")) return "Apertura-LPF 2025";
      if (t.includes("copa argentina 2025")) return "Copa Argentina 2025";
      if (t.includes("sudamericana 2025")) return "Copa Sudamericana 2025";
      if (t.includes("clausura-lpf 2025")) return "Clausura-LPF 2025";
      return "Otros";
    }

    Promise.all([
      fetch(futbolistasURL).then(r => r.text()),
      fetch(partidosURL).then(r => r.text())
    ])
    .then(([csvFutbolistas, csvPartidos]) => {
    futbolistas = Papa.parse(csvFutbolistas, { header: true, skipEmptyLines: true }).data.map(c => ({
        id: (c.ID ?? "").toString().trim(),
        futbolista: (c["Futbolista"] ?? "").toString().trim(),
        nombre: (c.Nombre ?? "").toString().trim(),
        posicion: (c.Posición ?? "").toString().trim(),
        fechanac: (c.FechaNacimiento?? "").toString().trim(),
        lugarnac: (c.LugarNacimiento?? "").toString().trim(),
        pais: (c.País ?? c.Pais ?? "").toString().trim(),
        fechamuerte: (c.FechaMuerte ?? "").toString().trim(),
        lugarmuerte: (c.LugarMuerte ?? "").toString().trim(),
        peso: (c.Peso ?? "").toString().trim(),
        altura: (c.Altura ?? "").toString().trim(),
        procedencia: (c.Procedencia ?? "").toString().trim(),
        destino: (c.Destino ?? "").toString().trim(),
        trayectoria: (c.Trayectoria ?? "").toString().trim(),
        biografía: (c.Biografía ?? "").toString().trim(),
        foto1: (c.Foto1 ?? "").toString().trim(),
        foto2: (c.Foto2 ?? "").toString().trim()
      }));

      encuentros = Papa.parse(csvPartidos, { header:true, skipEmptyLines:true }).data.map(p => ({
        Fecha: (p.Fecha ?? "").trim(),
        Técnico: (p.Técnico ?? "").trim(),
        Condición: (p.Condición ?? "").trim(),
        Situación: (p.Situación ?? "").trim(),
        Resultado1: (p.Resultado1 ?? "").trim(),
        Resultado2: (p.Resultado2 ?? "").trim(),
        Club: (p.Club ?? "").trim(),
        Torneo: (p.Torneo ?? "").trim(),
        Estadio: (p.Estadio ?? "").trim(),
        Árbitro: (p.Árbitro ?? "").trim(),
        Huracán: (p.Huracán ?? "").trim(),
        Rival: (p.Rival ?? "").trim(),
        Foto: (p.Foto ?? "").trim(),
        Incidencias: (p.Incidencias ?? "").trim()
      }));

      llenarSelectFutbolistas();
    });

    function llenarSelectFutbolistas() {
      const sel = document.getElementById("futbolistaSelect");
      sel.innerHTML = "<option value=''>-- Seleccionar --</option>";
      futbolistas.forEach(a => {
        if (a.futbolista) {
          const opt = document.createElement("option");
          opt.value = a.futbolista;
          opt.textContent = InvertirNombre(a.futbolista);
          sel.appendChild(opt);
        }
      });
      sel.addEventListener("change", mostrarFutbolistas);
    }

function mostrarFutbolistas() {
  const futbolistaId = document.getElementById("futbolistaSelect").value;
  const futbolista = futbolistas.find(a => a.futbolista === futbolistaId);
  if (!futbolista) {
    document.getElementById("futbolistaInfo").style.display = "none";
    return;
  }

      const cont = document.getElementById("futbolistaInfo");
      cont.style.display = "block";
      cont.innerHTML = `
        <div class="club-header">
      ${futbolista.foto1 ? `<img src="${futbolista.foto1}" alt="${futbolista.futbolista}" style="width:105px;height:140px;object-fit:cover;border-radius:8px;">` : ""}
      <div style="text-align:center;">
  <h2>${futbolista.futbolista}</h2>
  ${futbolista.pais
  ? futbolista.pais
      .split(/[\(\),.;\/]|(?:\)\s*)|(?:\s*\()|(?:\s*y\s*)|(?:\s*\d+\s*)/)
      .map(p => p.trim())
      .filter(p => p.length > 0)
      .map(p => `<img src="https://globopedia.github.io/Artids/Banderas/${encodeURIComponent(p)}.png" alt="${p}" title="${p}" class="bandera">`)
      .join("")
  : ""}
 <div class="trayectoria-escudos">
    ${renderTrayectoriaEscudos(futbolista.trayectoria)}
  </div>
  </div>
    </div>
    <p><b>Nombre:</b> ${futbolista.nombre}</p>
    <p><b>Posición:</b> ${futbolista.posicion}</p>
    <p><b>Procedencia:</b> ${futbolista.procedencia}</p>
    <p><b>Nacimiento:</b> ${futbolista.fechanac}, en ${futbolista.lugarnacimiento}</p>
    <p><b>Muerte:</b> ${futbolista.fechamuerte}, en ${futbolista.lugarmuerte}</p>
    <p><b>Peso:</b> ${futbolista.peso} kg — <b>Altura:</b> ${futbolista.altura} m</p>
    <p><b>Destino:</b> ${futbolista.destino}</p>
    <p><b>Trayectoria:</b> ${futbolista.trayectoria}</p>
    <p><b>Biografía:</b> ${futbolista.biografía}</p>
    <div style="text-align:center;">
    <p>${futbolista.foto2 ? `<img src="${futbolista.foto2}" alt="${futbolista.futbolista}" style="width:280px;height:360px;object-fit:cover;border-radius:8px;">` : ""}</p>
       <div class="stats">
  <h3 style="color:#FF0000;">📊 Partidos jugados en Huracán</h3>
  ${renderEstadisticas(futbolista.futbolista)}
</div>
      `;
    }
function limpiarNombreJugador(s) {
  if (!s) return "";
  return String(s)
    .replace(/\u00A0/g, " ")               // NBSP → espacio
    .replace(/^\s*\(?\d+\)?\s*/, "")       // quita "(48 " o "48)"
    .replace(/[.,;:)\s]+$/, "")            // quita .,;:) al final
    .replace(/^[\s(]+/, "")                // quita espacios o paréntesis al inicio
    .trim();
}
    
function renderEstadisticas(nombreFutbolista) {
  const delFutbolista = encuentros.filter(p => {
const jugadores = (p.Huracán || "")
  // 1. Reemplaza " (" por coma para separar correctamente los ingresos
  .replace(/ \(/g, ",")
  // 2. Elimina todos los números
  .replace(/\d+/g, "")
  // 3. Elimina paréntesis de cierre simples o dobles
  .replace(/\)+/g, "")
  // 4. Reemplaza el conector " y " (o variantes con espacios extra) por coma
  .replace(/\s+y\s+/gi, ",")
  // 5. Limpia dobles comas y espacios innecesarios
  .replace(/,,+/g, ",")
  .replace(/\s+,/g, ",")
  .replace(/,\s+/g, ",")
  .replace(/\s+/g, " ")
  // 6. Divide por comas o punto y coma
  .split(/[,;]+/)
  // 7. Quita paréntesis o espacios residuales
  .map(j => j.replace(/^[()\s]+|[()\s]+$/g, "").trim())
  // 8. Filtra vacíos o elementos cortos
  .filter(j => j.length > 1);
  return jugadores.some(j => norm(j) === norm(nombreFutbolista));
  });

  const agg = {};
  for (const e of delFutbolista) {
    const comp = bucketCompetencia(e.Torneo);
    const sit = cap(norm(e.Situación));
    if (!agg[comp]) agg[comp] = { Victoria:0, Empate:0, Derrota:0 };
    if (SITUACIONES.includes(sit)) {
      agg[comp][sit] += 1;
    }
  }

let html = "";
for (const comp of ORDEN_COMPETENCIAS) {
  if (!agg[comp]) continue;
  const bucket = agg[comp];
  const total = bucket.Victoria + bucket.Empate + bucket.Derrota;
  if (total === 0) continue;

  const resumen = `G${bucket.Victoria}-E${bucket.Empate}-P${bucket.Derrota}`;

  html += `
    <div class="stat-group">
      <div class="stat-title">🏆 ${comp}</div>
      <ul>
        <li>
          <label>
            <input type="checkbox" class="chkPartidos"
              data-comp="${comp}"
              data-sit="todos"
              data-futbolista="${nombreFutbolista}">
            📊 ${total} ${total === 1 ? "partido" : "partidos"} (${resumen})
          </label>
          <div class="partidos-lista" style="display:none; margin-left:20px;"></div>
        </li>
      </ul>
    </div>
  `;
}
return html || "<p>Sin datos disponibles</p>";
  }
  // Manejador de checkboxes (muestra partidos por filtro)
document.addEventListener("change", function(e) {
  if (!e.target.classList.contains("chkPartidos")) return;
  const contenedor = e.target.closest("li").querySelector(".partidos-lista");
  contenedor.innerHTML = "";
  if (e.target.checked) {
    const { comp, sit, futbolista } = e.target.dataset;

    // filtrar partidos del futbolista
    const partidos = encuentros.filter(p => {
      // el jugador aparece en la celda de Huracán
const jugadores = (p.Huracán || "")
  // 1. Reemplaza " (" por coma para separar correctamente los ingresos
  .replace(/ \(/g, ",")
  // 2. Elimina todos los números
  .replace(/\d+/g, "")
  // 3. Elimina paréntesis de cierre simples o dobles
  .replace(/\)+/g, "")
  // 4. Reemplaza el conector " y " (o variantes con espacios extra) por coma
  .replace(/\s+y\s+/gi, ",")
  // 5. Limpia dobles comas y espacios innecesarios
  .replace(/,,+/g, ",")
  .replace(/\s+,/g, ",")
  .replace(/,\s+/g, ",")
  .replace(/\s+/g, " ")
  // 6. Divide por comas o punto y coma
  .split(/[,;]+/)
  // 7. Quita paréntesis o espacios residuales
  .map(j => j.replace(/^[()\s]+|[()\s]+$/g, "").trim())
  // 8. Filtra vacíos o elementos cortos
  .filter(j => j.length > 1);
      return jugadores.some(j => norm(j) === norm(futbolista)) &&
             bucketCompetencia(p.Torneo) === comp &&
          (sit === "todos" || cap(norm(p.Situación)) === sit);
    });

    if (partidos.length) {
      partidos.forEach(p => {
        let bloqueHTML = "";

        if ((p.Condición || "").toLowerCase() === "visitante") {
          bloqueHTML = `
            <div class="partido-card">
              ${getTorneoImage(p.Torneo)}
              <div><b>${p.Fecha}</b></div>
              <img class="escudo-rival" src="${getEscudo(p.Club)}" alt="${p.Club}" />
              <div class="resultado2-box">${p.Resultado2}</div>
              <div class="resultado1-box">${p.Resultado1}</div>
              <img class="escudo-huracan" src="${getEscudo('Huracán')}" alt="Huracán">
              <div><b>${p.Torneo}</b></div>
              <div><b>Estadio:</b> ${p.Estadio} - <b>Árbitro:</b> ${p.Árbitro}</div>
              <div>${ p.Estadio && getEstadioImage(p.Estadio) ? `<img src="${getEstadioImage(p.Estadio)}" style="max-height:40px;">` : "" }</div>
              <div><b>${p.Club}:</b> ${p.Rival}</div>
              <div><b>Huracán:</b> ${p.Huracán}</div>
              ${ p.Foto ? `<div style="margin:6px 0;"><img src="${p.Foto}" style="max-width:250px;border-radius:8px;"></div>` : "" }
              <div>${renderIncidencias(p.Incidencias)}</div>
            </div>
          `;
        } else {
          bloqueHTML = `
            <div class="partido-card">
              ${getTorneoImage(p.Torneo)}
              <div><b>${p.Fecha}</b></div>
              <img class="escudo-huracan" src="${getEscudo('Huracán')}" alt="Huracán">
              <div class="resultado1-box">${p.Resultado1}</div>
              <div class="resultado2-box">${p.Resultado2}</div>
              <img class="escudo-rival" src="${getEscudo(p.Club)}" alt="${p.Club}" />
              <div><b>${p.Torneo}</b></div>
              <div><b>Estadio:</b> ${p.Estadio} - <b>Árbitro:</b> ${p.Árbitro}</div>
              <div>${ p.Estadio && getEstadioImage(p.Estadio) ? `<img src="${getEstadioImage(p.Estadio)}" style="max-height:40px;">` : "" }</div>
              <div><b>Huracán:</b> ${p.Huracán}</div>
              <div><b>${p.Club}:</b> ${p.Rival}</div>
              ${ p.Foto ? `<div style="margin:6px 0;"><img src="${p.Foto}" style="max-width:250px;border-radius:8px;"></div>` : "" }
              <div>${renderIncidencias(p.Incidencias)}</div>
            </div>
          `;
        }

        contenedor.innerHTML += `
          <div class="acordeon">
          <div class="acordeon-header">
  ${p.Resultado1}-${p.Resultado2}
  <img src="${getEscudo(p.Club)}" alt="${p.Club}" title="${p.Club}"
       style="height:22px; vertical-align:middle; margin:0 6px;">
  [${p.Técnico}]
</div>
            <div class="acordeon-body cerrado">${bloqueHTML}</div>
          </div>
        `;
      });
    } else {
      contenedor.innerHTML = "<i>No hay partidos registrados</i>";
    }
    contenedor.style.display = "block";
  } else {
    contenedor.style.display = "none";
  }
});

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("acordeon-header")) {
        const body = e.target.nextElementSibling;
        body.classList.toggle("cerrado");
        e.target.classList.toggle("abierto");
      }
    });

    function getEscudo(nombreClub) {
      if (!nombreClub) return "";
      try {
        return "https://globopedia.github.io/Artids/escudos/" + encodeURIComponent(nombreClub.trim()) + ".png";
      } catch (err) {
        const fileName = nombreClub.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\./g, "").replace(/\s+/g, "") + ".png";
        return "https://globopedia.github.io/Artids/escudos/" + fileName;
      }
    }

    function renderIncidencias(texto) {
      if (!texto) return "";
      return texto
        .replace(/GOL/g, "<img src='https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgi3GyVjBR-e_IN4mWVAuZofChVOj763GApXwzanoEJDUTysF1K9gf3N5qBCoDJ-ahi8wRkrZ3FCbl0ovTEjXyjFjFEWYF1MZ7YvHrq0bD5eQ7GsJPOkpLSC-k4zpZ1CbnyKVtoYlb6JWXByKkd0VAHuN1hy8P9LBz2fhn5e3Um_X-m4U9WLo9pQP428Fj4/s320/GolR.png' style='width:20px;height:20px;'>")
        .replace(/EXP/g, "<img src='https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgx8a6PCkGhKR9WTnh2NNWLMBDOIKWsNisSChpxN2NayjM5Z6YBIZmv52PvduZawIBBh_g5Pq56LdvjG8X1gSCud2q6NYS_NGOh7nAPaxUy_nC1YCcZJOgy2DeTZPRkqRgb1_HbpJshh-7o3MoW8Z3h8tBa8UZ153n5CzriOyvsSIxM6FsCbn-n115KC5Ln/s320/Roja.png' style='width:20px;height:20px;'>")
        .replace(/ATA/g, "<img src='https://blogger.googleusercontent.com/img/a/AVvXsEjygOwijhQ1dRIh6BPFrQu7EKOUShS0RLEVmPhCJSANGWOaNzvVmcbV03ZW0ZF5Npefl5r3P8iU6WjXRaSL80QYazspsJ4-nzA8pv4FqBwgu1Jr0wDw2iEPMvnVgK0nvRLeZmGYuVW8epSVTyyND28aoQRd9wD9yxKJWBuPOhOoVz-cUgpbM702W2ZlpsF7=w95-h79' style='width:20px;height:20px;'>")
        .replace(/PEN/g, "<img src='https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEho-erXGKkNZ7MaZWOtZw-ru0AnJwAlzHqnl5fKLmUAn_QtAMAbXgGMsqh21htJ2XSePyqAMAq4Xce1RkwkrqrA4Hw312mYcXhXMVW-m64vRS_lKTNgnBNvCzPZsPV3eEk_QclWiNZ9n9pvAQSiscTyp94vbN_h6aMeQ_nwTdBSdXGn5B3HW3A-sj_4Bw1j/s320/Penales.png' style='width:20px;height:20px;'>");
    }

    function getEstadioImage(estadio) {
      if (!estadio) return "";
      const fileName = estadio.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\./g, "").replace(/\s+/g, "") + ".png";
      return "https://globopedia.github.io/Artids/Estadios/" + fileName;
    }

    function getTorneoImage(nombreTorneo) {
      if (!nombreTorneo) return "";
      const texto = nombreTorneo.toLowerCase();
      const torneosDisponibles = [
        "Apertura 2007", "Clausura 2008", "Apertura 2008", "Clausura 2009",
        "Apertura 2009", "Clausura 2010", "Apertura 2010", "Clausura 2011",
        "Nacional B 11-12", "Copa Argentina 2012","Copa Argentina 2013","Copa Argentina 2014",
        "Copa Argentina 2015","Copa Argentina 2016","Copa Argentina 2017","Copa Argentina 2018",
        "Copa Argentina 2019","Copa Argentina 2020","Copa Argentina 2022","Copa Argentina 2023",
        "Copa Argentina 2024","Copa Argentina 2025", "Nacional B 12-13", "Nacional B 13-14",
        "Nacional B 2014", "Supercopa 2015", "Campeonato 2015", "Libertadores 2015",
        "Sudamericana 2015", "Campeonato 2016", "Libertadores 2016", "Campeonato 16-17",
        "Sudamericana 2017", "SAF 17-18", "SAF 18-19", "SAF 19-20", "Copa Maradona 2020",
        "Libertadores 2019", "Sudamericana 2020", "Torneo-LPF 2021", "Torneo-LPF 2022", "Torneo-LPF 2023",
        "Copa-LPF 2021", "Copa-LPF 2022", "Copa-LPF 2023", "Copa-LPF 2024", "Torneo-LPF 2024",
        "Apertura-LPF 2025", "Clausura-LPF 2025", "Libertadores 2023", "Sudamericana 2023", "Sudamericana 2025"
      ];
      for (const t of torneosDisponibles) {
        if (texto.includes(t.toLowerCase())) {
          return `<img src="https://globopedia.github.io/Artids/Torneos/${encodeURIComponent(t)}.png" style="max-height:40px; display:block; margin:4px auto;">`;
        }
      }
      return "";
    }

function getEscudoClub(nombreClub) {
  if (!nombreClub) return "";
  const fileName = nombreClub
    .normalize("NFD")                    // elimina tildes
    .replace(/[\u0300-\u036f]/g, "")
    .replace(/ñ/g, "n")                  // convierte ñ en n
    .replace(/[()"]/g, "")              // saca paréntesis y comillas
    .replace(/\s+/g, " ")               // normaliza espacios
    .trim();
  return `https://globopedia.github.io/Artids/Escudos/${fileName}.png`;
}
    
   function renderTrayectoriaEscudos(trayectoria) {
  if (!trayectoria) return "";

  // Separar por coma o punto y coma si usás eso
  const clubes = trayectoria.split(",").map(c => c.trim()).filter(Boolean);

  return clubes.map(club => {
    const src = getEscudoClub(club);
    return `<img src="${src}" alt="${club}" title="${club}" style="height:30px; margin: 5px;">`;
  }).join("");
}
  
  function InvertirNombre(nombre) {
  const partes = nombre.trim().split(" ");
  if (partes.length < 2) return nombre;

  if (partes.length === 2) {
    // Caso simple: Nombre + Apellido
    const [nombre1, apellido] = partes;
    return apellido + ", " + nombre1;
  }

  // Lista de conectores/apellidos compuestos en minúscula
  const conectores = ["de", "del", "de la", "de los", "la", "las", "los", "san", "santa"];

  // Unir las últimas palabras y ver si forman parte de un apellido compuesto
  let i = partes.length - 1;
  let apellido = partes[i];
  while (i > 0) {
    const posible = partes[i - 1].toLowerCase();
    if (conectores.includes(posible)) {
      apellido = partes[i - 1] + " " + apellido;
      i--;
    } else {
      break;
    }
  }

  const nombres = partes.slice(0, i).join(" ");
  return apellido + ", " + nombres;
}
  </script>
</body>
</html>
